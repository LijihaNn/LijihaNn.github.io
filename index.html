<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í¬ì¼“ëª¬ ìŠ¤íƒ€ì¼ ê²Œì„</title>
    <style>
        body { font-family: 'Arial'; padding: 20px; background: #f3f8ff; }
        h1 { color: #2c3e50; }
        .box { padding: 15px; border-radius: 10px; background: white; 
               box-shadow: 0 0 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        button { padding: 10px 20px; margin: 5px; border-radius: 8px; border: none; 
                 background: #4b7bec; color: white; cursor: pointer; }
        button:hover { background: #3867d6; }
        .log { white-space: pre-line; background: #eef3ff; padding: 10px; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>í¬ì¼“ëª¬ ìŠ¤íƒ€ì¼ ê²Œì„</h1>

    <div class="box">
        <h3>ì•¼ìƒ í¬ì¼“ëª¬ ì •ë³´</h3>
        <p id="wildInfo"></p>
    </div>

    <div class="box">
        <h3>ë‚´ í¬ì¼“ëª¬</h3>
        <p id="myInfo"></p>
    </div>

    <div class="box">
        <h3>í–‰ë™</h3>
        <button id="attackBtn">ê³µê²©í•˜ê¸°</button>
        <button id="catchBtn">í¬íší•˜ê¸°</button>
        <button id="runBtn">ë„ë§ê°€ê¸°</button>
    </div>

    <div class="log" id="log"></div>

    <script>
        // ë‚´ í¬ì¼“ëª¬ (ê¸°ë³¸ ìŠ¤íƒ€í„°)
        let myPokemon = {
            name: "íŒŒì´ë¦¬",
            maxHp: 45,
            hp: 45,
            attack: 12
        };

        // ì•¼ìƒ í¬ì¼“ëª¬ ëª©ë¡
        const wildList = [
            { name: "í”¼ì¹´ì¸„", maxHp: 35, attack: 10, rare: false },
            { name: "ëª¨ë‹¤í”¼", maxHp: 40, attack: 8, rare: false },
            { name: "ì•¼ëˆ", maxHp: 55, attack: 7, rare: false },
            { name: "ë¦¬ìëª½", maxHp: 80, attack: 18, rare: true },  // í¬ê·€
            { name: "ë®¤", maxHp: 100, attack: 20, rare: true }      // ë§¤ìš° í¬ê·€
        ];

        let wild = null;

        function spawnWild() {
            wild = JSON.parse(JSON.stringify(
                wildList[Math.floor(Math.random() * wildList.length)]
            ));
            wild.hp = wild.maxHp;

            log(`ì•¼ìƒ ${wild.name} ì´(ê°€) ë‚˜íƒ€ë‚¬ë‹¤!`);
            updateInfo();
        }

        function updateInfo() {
            document.getElementById("wildInfo").innerText =
                `${wild.name} (HP: ${wild.hp}/${wild.maxHp}) ${wild.rare ? "ğŸŒŸ í¬ê·€" : ""}`;

            document.getElementById("myInfo").innerText =
                `${myPokemon.name} (HP: ${myPokemon.hp}/${myPokemon.maxHp})`;
        }

        function log(t) {
            document.getElementById("log").innerText += t + "\n";
        }

        // ê³µê²© ë²„íŠ¼
        document.getElementById("attackBtn").onclick = () => {
            const dmg = Math.floor(Math.random() * myPokemon.attack) + 5;
            wild.hp = Math.max(0, wild.hp - dmg);
            log(`ë‚´ í¬ì¼“ëª¬ì´ ${wild.name}ì—ê²Œ ${dmg} ë°ë¯¸ì§€ë¥¼ ì£¼ì—ˆë‹¤!`);

            if (wild.hp === 0) {
                log(`${wild.name}ì„(ë¥¼) ì“°ëŸ¬ëœ¨ë ¸ë‹¤!\nìƒˆë¡œìš´ ì•¼ìƒ í¬ì¼“ëª¬ ë“±ì¥!`);
                spawnWild();
                return;
            }

            wildAttack();
            updateInfo();
        };

        // ì•¼ìƒ í¬ì¼“ëª¬ ë°˜ê²©
        function wildAttack() {
            const dmg = Math.floor(Math.random() * wild.attack) + 3;
            myPokemon.hp = Math.max(0, myPokemon.hp - dmg);
            log(`ì•¼ìƒ ${wild.name}ì˜ ê³µê²©! ${dmg} ë°ë¯¸ì§€!`);

            if (myPokemon.hp === 0) {
                log("ë‚´ í¬ì¼“ëª¬ì´ ì“°ëŸ¬ì¡Œë‹¤â€¦ íšŒë³µ í›„ ìƒˆë¡œìš´ í¬ì¼“ëª¬ ë“±ì¥!");
                myPokemon.hp = myPokemon.maxHp;
                spawnWild();
            }
        }

        // í¬íš ë²„íŠ¼
        document.getElementById("catchBtn").onclick = () => {
            const hpRatio = wild.hp / wild.maxHp;
            let catchRate = Math.floor((1 - hpRatio) * 70);  // ìµœëŒ€ 70%
            if (wild.rare) catchRate -= 20; // í¬ê·€ëŠ” ë” ì¡ê¸° ì–´ë ¤ì›€
            if (catchRate < 5) catchRate = 5;

            const roll = Math.random() * 100;
            log(`í¬íš ì‹œë„! í™•ë¥ : ${catchRate}%`);

            if (roll <= catchRate) {
                log(`ğŸ‰ ì„±ê³µ! ${wild.name}ì„(ë¥¼) ì¡ì•˜ë‹¤!\nìƒˆë¡œìš´ ì•¼ìƒ í¬ì¼“ëª¬ ë“±ì¥!`);
                spawnWild();
            } else {
                log("í¬íš ì‹¤íŒ¨! ì•¼ìƒ í¬ì¼“ëª¬ì´ ë„ë§ì³¤ë‹¤!");
                spawnWild();
            }
        };

        // ë„ë§ê°€ê¸°
        document.getElementById("runBtn").onclick = () => {
            log("ë„ë§ì³¤ë‹¤! ìƒˆë¡œìš´ í¬ì¼“ëª¬ì„ ì°¾ëŠ” ì¤‘â€¦");
            spawnWild();
        };

        // ì²˜ìŒ ì‹œì‘
        spawnWild();
    </script>
</body>
</html>
